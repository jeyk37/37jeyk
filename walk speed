--[[
 Walk Speed Adjuster GUI (Fixed Version)
 Works with Delta Executor
 Author: Kaezorath
]]

-- Remove old GUI if re-executed
pcall(function()
    if game.CoreGui:FindFirstChild("WalkSpeedAdjuster") then
        game.CoreGui.WalkSpeedAdjuster:Destroy()
    end
end)

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "WalkSpeedAdjuster"
ScreenGui.Parent = game:GetService("CoreGui")

-- Main Frame
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Position = UDim2.new(0.5, -100, 0.8, 0)
Frame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
Title.BorderSizePixel = 0
Title.Text = "Walk Speed Adjuster"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Parent = Frame

-- Speed Input
local SpeedBox = Instance.new("TextBox")
SpeedBox.Size = UDim2.new(0, 180, 0, 30)
SpeedBox.Position = UDim2.new(0, 10, 0, 40)
SpeedBox.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.PlaceholderText = "Enter speed (e.g. 32)"
SpeedBox.Font = Enum.Font.SourceSans
SpeedBox.TextSize = 18
SpeedBox.Parent = Frame

-- Apply Button
local Button = Instance.new("TextButton")
Button.Size = UDim2.new(0, 180, 0, 25)
Button.Position = UDim2.new(0, 10, 0, 75)
Button.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Text = "Apply Speed"
Button.Font = Enum.Font.SourceSansBold
Button.TextSize = 18
Button.Parent = Frame

-- Function to set speed properly
local function SetSpeed(speed)
	local player = game.Players.LocalPlayer
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:FindFirstChildWhichIsA("Humanoid")
	if humanoid then
		humanoid.WalkSpeed = speed
		-- In case the game resets speed constantly, force update
		task.spawn(function()
			for i = 1, 20 do
				if humanoid and humanoid.WalkSpeed ~= speed then
					humanoid.WalkSpeed = speed
				end
				task.wait(0.2)
			end
		end)
	end
end

-- Button logic
Button.MouseButton1Click:Connect(function()
	local inputSpeed = tonumber(SpeedBox.Text)
	if inputSpeed and inputSpeed > 0 then
		SetSpeed(inputSpeed)
		Button.Text = "Speed Set: " .. inputSpeed
	else
		Button.Text = "Invalid Input!"
	end
	task.wait(1)
	Button.Text = "Apply Speed"
end)
